# (C) 2025: Jonas Julius Harang, Hans Georg Schaathun <hasc@ntnu.no>

"""
This is the script run as a subprocess to sandbox any use
of student input.
"""

from ChatRunner.chatrunner import *
import json, re
import requests   # !!!


__student_answer__ = """{studans}"""
__prompt__ = """{prompt}"""
sandboxparams = {sandbox}

if sandboxparams is None:
   raise Exception( "No sandbox received in test program." )

response = chatRequest(sandboxparams,__student_answer__,__prompt__)

svar, svar_fetched = formatAnswer(response,sandboxparams)

svardata, testResults = dumpResponse( svar, svar_fetched )

print(svardata.dump())
    
for test in testResults:
       print(test.dump())
